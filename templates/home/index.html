<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Calculadora</title>
    <style>
        body { font-family: sans-serif; margin: 0; background-color: #f4f4f4; }
        .header { background-color: #333; color: white; padding: 1rem; text-align: right; }
        .header a { color: #ffc107; text-decoration: none; }
        .container { display: flex; }
        .main-content { flex: 3; padding: 2rem; }
        .sidebar { flex: 1; padding: 2rem; background-color: #e9ecef; border-left: 1px solid #ddd; min-height: 80vh; }
        .calculator-form input, .calculator-form select { padding: 0.5rem; margin-right: 0.5rem; }
        .calculator-form button { padding: 0.5rem 1rem; }
        .resultado { margin-top: 1rem; font-size: 1.5rem; font-weight: bold; }
        .historico ul { list-style: none; padding: 0; }
        .historico li { background: #fff; padding: 0.5rem; margin-bottom: 0.5rem; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <span>Olá, {{ user.username }}!</span> | <a href="{% url 'logout' %}">Sair</a>
    </div>

    <div class="container">
        <div class="main-content">
            <h2>Calculadora</h2>
            <form class="calculator-form" method="post">
                {% csrf_token %}
                <input type="number" name="num1" step="any" required>
                <select name="operador">
                    <option value="+">+</option>
                    <option value="-">-</option>
                    <option value="*">*</option>
                    <option value="/">/</option>
                </select>
                <input type="number" name="num2" step="any" required>
                <button type="submit">Calcular</button>
            </form>

            {% if resultado %}
                <div class="resultado">
                    Resultado: {{ resultado }}
                </div>
            {% endif %}

            {% if erro %}
                <div class="resultado" style="color: red;">
                    {{ erro }}
                </div>
            {% endif %}
        </div>

        <div class="sidebar">
            <h3>Últimos Cálculos</h3>
            <div class="historico">
                <ul>
                    {% for op in historico %}
                        <li>{{ op.parametros }} = {{ op.resultado }}</li>
                    {% empty %}
                        <li>Nenhum cálculo realizado ainda.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</body>
</html>